<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>AdAware AI Dashboard</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="dashboard-container">
    <header>
      <h1>AdAware AI <span class="badge">Dashboard</span></h1>
      <nav>
        <button id="btn-analyze-tab" class="active">Analyze</button>
        <button id="btn-history-tab">History</button>
        <button id="btn-stats-tab">Stats</button>
      </nav>
    </header>

    <!-- ANALYZE VIEW -->
    <main id="view-analyze">
      <div class="grid-layout">
        <div class="glass-card input-section">
          <h2>Analyze Ad</h2>
          <div class="upload-area" id="drop-zone">
            <p>Drag & Drop Image or Click to Upload</p>
            <input type="file" id="file-input" hidden accept="image/*">
          </div>
          <div class="or-divider">OR</div>
          <input type="text" id="url-input" placeholder="Paste Image URL">
          <textarea id="caption-input" placeholder="Optional caption context..."></textarea>

          <div class="settings">
            <label><input type="checkbox" id="chk-use-llm"> Use LLM (Slower but detailed)</label>
            <label><input type="checkbox" id="chk-consent"> Allow Data Usage</label>
          </div>

          <button id="btn-analyze" class="btn-primary">Analyze Risk</button>
          <div id="backend-status" class="status-indicator">Backend: Checking...</div>
        </div>

        <div class="glass-card result-section" id="result-container" style="display:none">
          <div class="result-header">
            <span id="res-label" class="label-badge">Analyzing...</span>
            <span id="res-score" class="score-text"></span>
          </div>
          <div id="res-content">
            <!-- Dynamic result content -->
          </div>
        </div>
      </div>
    </main>

    <!-- HISTORY VIEW -->
    <main id="view-history" style="display:none">
      <div class="history-layout">
        <div class="glass-card history-list-section">
          <h2>Analysis History</h2>
          <div class="filters">
            <select id="filter-label">
              <option value="">All Labels</option>
              <option value="high-risk">High Risk</option>
              <option value="scam-suspected">Scam Suspected</option>
              <option value="low-risk">Low Risk</option>
              <option value="safe">Safe</option>
            </select>
            <button id="btn-refresh-history">Refresh</button>
          </div>
          <table class="history-table">
            <thead>
              <tr>
                <th>Time</th>
                <th>Domain</th>
                <th>Label</th>
                <th>Score</th>
              </tr>
            </thead>
            <tbody id="history-tbody">
              <tr>
                <td colspan="4">Loading...</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="glass-card details-pane" id="details-pane">
          <h3>Details</h3>
          <p class="placeholder-text">Click a row to see details.</p>
          <div id="details-content" style="display:none">
            <div class="detail-row"><strong>Request ID:</strong> <span id="det-id"></span></div>
            <div class="detail-row"><strong>Label:</strong> <span id="det-label" class="label-badge"></span></div>
            <div class="detail-row"><strong>Risk Score:</strong> <span id="det-score"></span></div>
            <div class="detail-row"><strong>Explanation:</strong>
              <p id="det-explanation"></p>
            </div>
            <div class="detail-row"><strong>Evidence (Why Flagged):</strong>
              <ul id="det-evidence"></ul>
            </div>
            <div class="detail-row"><strong>OCR Text:</strong>
              <pre id="det-ocr"></pre>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- STATS VIEW -->
    <main id="view-stats" style="display:none">
      <div class="stats-grid">
        <div class="glass-card stat-box">
          <h3>Total Analyses</h3>
          <div class="big-number" id="stat-total">-</div>
        </div>
        <div class="glass-card stat-box">
          <h3>Label Distribution</h3>
          <ul id="stat-labels-list"></ul>
        </div>
        <div class="glass-card stat-box">
          <h3>Feedback Accuracy</h3>
          <div class="big-number" id="stat-accuracy">-</div>
          <small>Based on user feedback</small>
        </div>
      </div>
    </main>

  </div>
  <script src="script.js"></script>
</body>

</html>